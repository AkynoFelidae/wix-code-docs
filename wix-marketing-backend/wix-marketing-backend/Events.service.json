{ "name": "Events",
  "memberOf": "wix-marketing-backend",
  "mixes": [],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 1,
      "filename": "events.js" },
  "docs":
    { "summary": "Events that are triggered by actions related to Wix Marketing.",
      "description":
        [ "Wix  events are fired in your site's backend when certain events occur in your site's store.",
          " You can write event handlers that react to these events. Event handler functions",
          " receive data that corresponds to the event that has occurred. Use event handlers",
          " to create custom responses to marketing events.",
          "",
          " To add a marketing event handler, add an **events.js** file to the **Backend** section",
          " of your site if one does not already exist. All event handler functions for your",
          " site are defined in this file.",
          "",
          " Event handler functions are defined using the following pattern:",
          "",
          " ```javascript",
          " export function <wixAppName>_<eventName>(event) { }",
          " ```",
          "",
          " For example, an event handler that handles coupon creation in a Wix site looks",
          " like this:",
          "",
          " ```javascript",
          " export function wixMarketing_onCouponCreated(event) { }",
          " ```",
          "",
          " > **Note:** Backend events don't work when previewing your site." ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "onCouponApplied",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "event",
              "type": "wix-marketing-backend.Events.CouponAppliedEvent",
              "doc": "Information about an applied coupon." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 155,
              "filename": "events.js" } ],
        "docs":
          { "summary": "An event that fires when a coupon is used.",
            "description":
              [ "The `onCouponApplied()` event handler runs when an order with an applied coupon is completed successfully or marked as paid.",
                "",
                "> **Note:** Backend events don't work when previewing your site." ],
            "links": [],
            "examples":
              [ { "title": "An event when a coupon is applied",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "",
                      "export function wixMarketing_onCouponApplied(event) {",
                      "  const appliedCouponId = event.entity._id;",
                      "  const appliedCouponOrderId = event.entity.wixAppOrderId",
                      "}",
                      "",
                      "/* Full event object",
                      " *",
                      " *  {",
                      " *    \"id\": \"49857a7d-8a0a-4a8b-8a4a-e7fbcbaac44e\",",
                      " *    \"entityId\": \"a10f20e6-fd40-49d5-9bb7-fa16cf820ec2\",",
                      " *    \"eventTime\": \"2020-12-09T12:46:39.443605Z\",",
                      " *    \"triggeredByAnonymizeRequest\": false,",
                      " *    \"body\": {",
                      " *      \"_id\": \"a10f20e6-fd40-49d5-9bb7-fa16cf820ec2\",",
                      " *      \"name\": \"Applied Coupon Name\",",
                      " *      \"code\": \"AppliedCouponCode\",",
                      " *      \"startTime\": \"Wed Dec 09 2020 12:38:13 GMT+0000 (Coordinated Universal Time)\",",
                      " *      \"expirationTime\": \"Fri Dec 25 2020 21:59:59 GMT+0000 (Coordinated Universal Time)\",",
                      " *      \"usageLimit\": 5,",
                      " *      \"limitPerCustomer\": 1,",
                      " *      \"active\": true,",
                      " *      \"scope\": {",
                      " *        \"namespace\": \"stores\",",
                      " *        \"group\": {",
                      " *          \"name\": \"product\",",
                      " *          \"entityId\": \"0614129c-8777-9f3b-4dfe-b80a54df10d5\"",
                      " *        }",
                      " *      },",
                      " *      \"_dateCreated\": \"Wed Dec 09 2020 12:39:12 GMT+0000 (Coordinated Universal Time)\",",
                      " *      \"numberOfUsages\": 1,",
                      " *      \"expired\": false,",
                      " *      \"displayData\": {",
                      " *        \"name\": \"Brazilian Arabica\",",
                      " *        \"formattedPrice\": \"$35.00\",",
                      " *        \"mediaItem\": \"https://static.wixstatic.com/media/nsplsh_306d666a306a4a74306459~mv2_d_4517_2992_s_4_2.jpg/v1/fit/w_4517,h_2992,q_90/file.jpg\"",
                      " *      },",
                      " *      \"limitedToOneItem\": true,",
                      " *      \"type\": \"PercentOff\",",
                      " *      \"percentOffRate\": 10,",
                      " *      \"wixAppOrderId\": \"37419976-aa24-4e39-8e5f-305f8ce96e1a\"",
                      " *    }",
                      " *  }",
                      " *",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "onCouponCreated",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "event",
              "type": "wix-marketing-backend.Events.CouponEvent",
              "doc": "Information about a newly created coupon." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 125,
              "filename": "events.js" } ],
        "docs":
          { "summary": "An event that fires when a coupon is created.",
            "description":
              [ "The `onCouponCreated()` event handler runs when a new coupon is created.",
                "",
                "> **Note:** Backend events don't work when previewing your site." ],
            "links":
              [ "[`createCoupon()`](#createCoupon)" ],
            "examples":
              [ { "title": "An event when a coupon is created",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "",
                      "export function wixMarketing_onCouponCreated(event) {",
                      "  const newCouponId = event.entity._id;",
                      "  const newCouponType = event.entity.type",
                      "}",
                      "",
                      "/* Full event object",
                      " *",
                      " *  {",
                      " *    \"id\": \"3d4c521c-96f1-4306-9f4a-66ec0077260c\",",
                      " *    \"entityId\": \"a10f20e6-fd40-49d5-9bb7-fa16cf820ec2\",",
                      " *    \"eventTime\": \"2020-12-09T12:39:12.835292Z\",",
                      " *    \"triggeredByAnonymizeRequest\": false,",
                      " *    \"entity\": {",
                      " *      \"_id\": \"a10f20e6-fd40-49d5-9bb7-fa16cf820ec2\",",
                      " *      \"name\": \"New Coupon Name\",",
                      " *      \"code\": \"NewCouponCode\",",
                      " *      \"startTime\": \"Wed Dec 09 2020 12:38:13 GMT+0000 (Coordinated Universal Time)\",",
                      " *      \"expirationTime\": \"Fri Dec 11 2020 12:38:13 GMT+0000 (Coordinated Universal Time)\",",
                      " *      \"usageLimit\": 10,",
                      " *      \"active\": true,",
                      " *      \"scope\": {",
                      " *        \"namespace\": \"stores\",",
                      " *        \"group\": {",
                      " *          \"name\": \"product\",",
                      " *          \"entityId\": \"0614129c-8777-9f3b-4dfe-b80a54df10d5\"",
                      " *        }",
                      " *      },",
                      " *      \"_dateCreated\": \"Wed Dec 09 2020 12:39:12 GMT+0000 (Coordinated Universal Time)\",",
                      " *      \"expired\": false,",
                      " *      \"displayData\": {",
                      " *        \"name\": \"Brazilian Arabica\",",
                      " *        \"formattedPrice\": \"$35.00\",",
                      " *        \"mediaItem\": \"https://static.wixstatic.com/media/nsplsh_306d666a306a4a74306459~mv2_d_4517_2992_s_4_2.jpg/v1/fit/w_4517,h_2992,q_90/file.jpg\"",
                      " *      },",
                      " *      \"limitedToOneItem\": true,",
                      " *      \"type\": \"PercentOff\",",
                      " *      \"percentOffRate\": 5",
                      " *    }",
                      " *  }",
                      " *",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "onCouponDeleted",
        "labels":
          [ "changed" ],
        "nameParams": [],
        "params":
          [ { "name": "event",
              "type": "wix-marketing-backend.Events.CouponDeletedEvent",
              "doc": "Information about an deleted coupon." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 169,
              "filename": "events.js" } ],
        "docs":
          { "summary": "An event that fires when a coupon is deleted.",
            "description":
              [ "The `onCouponDeleted()` event handler runs when a coupon is deleted.",
                "",
                "> **Note:** Backend events don't work when previewing your site." ],
            "links":
              [ "[`deleteCoupon()`](#deleteCoupon)" ],
            "examples":
              [ { "title": "An event when a coupon is deleted",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "",
                      "export function wixMarketing_onCouponDeleted(event) {",
                      "  const deletedCouponId = event.entityId;",
                      "}",
                      "",
                      "/* Full event object",
                      " *",
                      " *  {",
                      " *    \"id\": \"9be76703-0860-477c-a073-e803511bec08\",",
                      " *    \"entityId\": \"a10f20e6-fd40-49d5-9bb7-fa16cf820ec2\",",
                      " *    \"eventTime\": \"2020-12-09T12:48:00.900936Z\",",
                      " *    \"triggeredByAnonymizeRequest\": false",
                      " *  }",
                      " *",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "onCouponUpdated",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "event",
              "type": "wix-marketing-backend.Events.CouponEvent",
              "doc": "Information about an updated coupon." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 140,
              "filename": "events.js" } ],
        "docs":
          { "summary": "An event that fires when a coupon is updated.",
            "description":
              [ "The `onCouponUpdated()` event handler runs when a coupon is updated.",
                "",
                "> **Note:** Backend events don't work when previewing your site." ],
            "links":
              [ "[`updateCouponFields()`](#updateCouponFields)" ],
            "examples":
              [ { "title": "An event when a coupon is updated",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "",
                      "export function wixMarketing_onCouponUpdated(event) {",
                      "  const updatedCouponId = event.entity._id;",
                      "  const updatedCouponUsageLimit = event.entity.usageLimit",
                      "}",
                      "",
                      "/* Full event object",
                      " *",
                      " *  {",
                      " *    \"id\": \"762feb39-8847-43de-91b5-78c2b8e084b0\",",
                      " *    \"entityId\": \"a10f20e6-fd40-49d5-9bb7-fa16cf820ec2\",",
                      " *    \"eventTime\": \"2020-12-09T12:42:32.577267Z\",",
                      " *    \"triggeredByAnonymizeRequest\": false,",
                      " *    \"entity\": {",
                      " *      \"_id\": \"a10f20e6-fd40-49d5-9bb7-fa16cf820ec2\",",
                      " *      \"name\": \"Updated Coupon Name\",",
                      " *      \"code\": \"UpdatedCouponCode\",",
                      " *      \"startTime\": \"Wed Dec 09 2020 12:38:13 GMT+0000 (Coordinated Universal Time)\",",
                      " *      \"expirationTime\": \"Fri Dec 25 2020 21:59:59 GMT+0000 (Coordinated Universal Time)\",",
                      " *      \"usageLimit\": 5,",
                      " *      \"limitPerCustomer\": 1,",
                      " *      \"active\": true,",
                      " *      \"scope\": {",
                      " *        \"namespace\": \"stores\",",
                      " *        \"group\": {",
                      " *          \"name\": \"product\",",
                      " *          \"entityId\": \"0614129c-8777-9f3b-4dfe-b80a54df10d5\"",
                      " *        }",
                      " *      },",
                      " *      \"_dateCreated\": \"Wed Dec 09 2020 12:39:12 GMT+0000 (Coordinated Universal Time)\",",
                      " *      \"expired\": false,",
                      " *      \"displayData\": {",
                      " *        \"name\": \"Brazilian Arabica\",",
                      " *        \"formattedPrice\": \"$35.00\",",
                      " *        \"mediaItem\": \"https://static.wixstatic.com/media/nsplsh_306d666a306a4a74306459~mv2_d_4517_2992_s_4_2.jpg/v1/fit/w_4517,h_2992,q_90/file.jpg\"",
                      " *      },",
                      " *      \"limitedToOneItem\": true,",
                      " *      \"type\": \"PercentOff\",",
                      " *      \"percentOffRate\": 10",
                      " *    }",
                      " *  }",
                      " *",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages":
    [ { "name": "CouponAppliedEvent",
        "locations":
          [ { "lineno": 41,
              "filename": "events.js" } ],
        "docs":
          { "summary": "An object representing a coupon applied event.",
            "links": [],
            "examples":
              [ { "title": "An event when an abandoned shopping cart is recovered",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "",
                      "export function wixMarketing_onCouponCreated(event) {",
                      "  const newCouponId = event.entity._id;",
                      "  const newCouponType = event.entity.type",
                      "}",
                      "",
                      "/* Full event object",
                      " *",
                      " *  {",
                      " *    \"id\": \"3d4c521c-96f1-4306-9f4a-66ec0077260c\",",
                      " *    \"entityId\": \"a10f20e6-fd40-49d5-9bb7-fa16cf820ec2\",",
                      " *    \"eventTime\": \"2020-12-09T12:39:12.835292Z\",",
                      " *    \"triggeredByAnonymizeRequest\": false,",
                      " *    \"entity\": {",
                      " *      \"_id\": \"a10f20e6-fd40-49d5-9bb7-fa16cf820ec2\",",
                      " *      \"name\": \"New Coupon Name\",",
                      " *      \"code\": \"NewCouponCode\",",
                      " *      \"startTime\": \"Wed Dec 09 2020 12:38:13 GMT+0000 (Coordinated Universal Time)\",",
                      " *      \"expirationTime\": \"Fri Dec 11 2020 12:38:13 GMT+0000 (Coordinated Universal Time)\",",
                      " *      \"usageLimit\": 10,",
                      " *      \"active\": true,",
                      " *      \"scope\": {",
                      " *        \"namespace\": \"stores\",",
                      " *        \"group\": {",
                      " *          \"name\": \"product\",",
                      " *          \"entityId\": \"0614129c-8777-9f3b-4dfe-b80a54df10d5\"",
                      " *        }",
                      " *      },",
                      " *      \"_dateCreated\": \"Wed Dec 09 2020 12:39:12 GMT+0000 (Coordinated Universal Time)\",",
                      " *      \"expired\": false,",
                      " *      \"displayData\": {",
                      " *        \"name\": \"Brazilian Arabica\",",
                      " *        \"formattedPrice\": \"$35.00\",",
                      " *        \"mediaItem\": \"https://static.wixstatic.com/media/nsplsh_306d666a306a4a74306459~mv2_d_4517_2992_s_4_2.jpg/v1/fit/w_4517,h_2992,q_90/file.jpg\"",
                      " *      },",
                      " *      \"limitedToOneItem\": true,",
                      " *      \"type\": \"PercentOff\",",
                      " *      \"percentOffRate\": 5",
                      " *    }",
                      " *  }",
                      " *",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "id",
              "type": "string",
              "doc": "Unique event ID." },
            { "name": "entityId",
              "type": "string",
              "doc": "Coupon ID associated with this event." },
            { "name": "eventTime",
              "type": "string",
              "doc": "Event timestamp." },
            { "name": "triggeredByAnonymizeRequest",
              "type": "boolean",
              "doc": "Whether this event was triggered as a result of a privacy regulation application (e.g., GDPR)." },
            { "name": "body",
              "type": "wix-marketing-backend.Coupons.AppliedCoupon",
              "doc": "Applied coupon information." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "CouponDeletedEvent",
        "locations":
          [ { "lineno": 52,
              "filename": "events.js" } ],
        "docs":
          { "summary": "An object representing a coupon deleted event.",
            "links": [],
            "examples":
              [ { "title": "An event when an abandoned shopping cart is recovered",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "",
                      "export function wixMarketing_onCouponCreated(event) {",
                      "  const newCouponId = event.entity._id;",
                      "  const newCouponType = event.entity.type",
                      "}",
                      "",
                      "/* Full event object",
                      " *",
                      " *  {",
                      " *    \"id\": \"3d4c521c-96f1-4306-9f4a-66ec0077260c\",",
                      " *    \"entityId\": \"a10f20e6-fd40-49d5-9bb7-fa16cf820ec2\",",
                      " *    \"eventTime\": \"2020-12-09T12:39:12.835292Z\",",
                      " *    \"triggeredByAnonymizeRequest\": false,",
                      " *    \"entity\": {",
                      " *      \"_id\": \"a10f20e6-fd40-49d5-9bb7-fa16cf820ec2\",",
                      " *      \"name\": \"New Coupon Name\",",
                      " *      \"code\": \"NewCouponCode\",",
                      " *      \"startTime\": \"Wed Dec 09 2020 12:38:13 GMT+0000 (Coordinated Universal Time)\",",
                      " *      \"expirationTime\": \"Fri Dec 11 2020 12:38:13 GMT+0000 (Coordinated Universal Time)\",",
                      " *      \"usageLimit\": 10,",
                      " *      \"active\": true,",
                      " *      \"scope\": {",
                      " *        \"namespace\": \"stores\",",
                      " *        \"group\": {",
                      " *          \"name\": \"product\",",
                      " *          \"entityId\": \"0614129c-8777-9f3b-4dfe-b80a54df10d5\"",
                      " *        }",
                      " *      },",
                      " *      \"_dateCreated\": \"Wed Dec 09 2020 12:39:12 GMT+0000 (Coordinated Universal Time)\",",
                      " *      \"expired\": false,",
                      " *      \"displayData\": {",
                      " *        \"name\": \"Brazilian Arabica\",",
                      " *        \"formattedPrice\": \"$35.00\",",
                      " *        \"mediaItem\": \"https://static.wixstatic.com/media/nsplsh_306d666a306a4a74306459~mv2_d_4517_2992_s_4_2.jpg/v1/fit/w_4517,h_2992,q_90/file.jpg\"",
                      " *      },",
                      " *      \"limitedToOneItem\": true,",
                      " *      \"type\": \"PercentOff\",",
                      " *      \"percentOffRate\": 5",
                      " *    }",
                      " *  }",
                      " *",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "id",
              "type": "string",
              "doc": "Unique event ID." },
            { "name": "entityId",
              "type": "string",
              "doc": "Coupon ID associated with this event." },
            { "name": "eventTime",
              "type": "string",
              "doc": "Event timestamp." },
            { "name": "triggeredByAnonymizeRequest",
              "type": "boolean",
              "doc": "Whether this event was triggered as a result of a privacy regulation application (e.g., GDPR)." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "CouponEvent",
        "locations":
          [ { "lineno": 30,
              "filename": "events.js" } ],
        "docs":
          { "summary": "An object representing a coupon.",
            "links": [],
            "examples":
              [ { "title": "An event when an abandoned shopping cart is recovered",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "",
                      "export function wixMarketing_onCouponCreated(event) {",
                      "  const newCouponId = event.entity._id;",
                      "  const newCouponType = event.entity.type",
                      "}",
                      "",
                      "/* Full event object",
                      " *",
                      " *  {",
                      " *    \"id\": \"3d4c521c-96f1-4306-9f4a-66ec0077260c\",",
                      " *    \"entityId\": \"a10f20e6-fd40-49d5-9bb7-fa16cf820ec2\",",
                      " *    \"eventTime\": \"2020-12-09T12:39:12.835292Z\",",
                      " *    \"triggeredByAnonymizeRequest\": false,",
                      " *    \"entity\": {",
                      " *      \"_id\": \"a10f20e6-fd40-49d5-9bb7-fa16cf820ec2\",",
                      " *      \"name\": \"New Coupon Name\",",
                      " *      \"code\": \"NewCouponCode\",",
                      " *      \"startTime\": \"Wed Dec 09 2020 12:38:13 GMT+0000 (Coordinated Universal Time)\",",
                      " *      \"expirationTime\": \"Fri Dec 11 2020 12:38:13 GMT+0000 (Coordinated Universal Time)\",",
                      " *      \"usageLimit\": 10,",
                      " *      \"active\": true,",
                      " *      \"scope\": {",
                      " *        \"namespace\": \"stores\",",
                      " *        \"group\": {",
                      " *          \"name\": \"product\",",
                      " *          \"entityId\": \"0614129c-8777-9f3b-4dfe-b80a54df10d5\"",
                      " *        }",
                      " *      },",
                      " *      \"_dateCreated\": \"Wed Dec 09 2020 12:39:12 GMT+0000 (Coordinated Universal Time)\",",
                      " *      \"expired\": false,",
                      " *      \"displayData\": {",
                      " *        \"name\": \"Brazilian Arabica\",",
                      " *        \"formattedPrice\": \"$35.00\",",
                      " *        \"mediaItem\": \"https://static.wixstatic.com/media/nsplsh_306d666a306a4a74306459~mv2_d_4517_2992_s_4_2.jpg/v1/fit/w_4517,h_2992,q_90/file.jpg\"",
                      " *      },",
                      " *      \"limitedToOneItem\": true,",
                      " *      \"type\": \"PercentOff\",",
                      " *      \"percentOffRate\": 5",
                      " *    }",
                      " *  }",
                      " *",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "id",
              "type": "string",
              "doc": "Unique event ID." },
            { "name": "entityId",
              "type": "string",
              "doc": "Coupon ID associated with this event." },
            { "name": "eventTime",
              "type": "string",
              "doc": "Event timestamp." },
            { "name": "triggeredByAnonymizeRequest",
              "type": "boolean",
              "doc": "Whether this event was triggered as a result of a privacy regulation application (e.g., GDPR)." },
            { "name": "entity",
              "type": "wix-marketing-backend.Coupons.Coupon",
              "doc": "Coupon information." } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  } }