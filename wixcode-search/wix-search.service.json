{ "name": "wix-search",
  "mixes": [],
  "labels": [],
  "location":
    { "lineno": 1,
      "filename": "search.js" },
  "docs":
    { "summary": "The wix-search module contains functionality for searching a site.",
      "description":
        [ "The wix-search API allows you to create a custom site search experience for your site visitors.",
          " For example, you can use a text input element to get a search phrase from site visitors,",
          " and use a repeater to display the results of a search.",
          "",
          " To enable Search API functionality for your site, you must add the <a href=\"https://support.wix.com/en/article/about-wix-site-search\" target=\"_blank\">Wix Site Search application</a> to",
          " your site. After installing the app you can delete the Search Bar, but make sure to leave the  <a href=\"https://support.wix.com/en/article/about-wix-site-search#understanding-the-search-results-page\" target=\"_blank\">Search Results page</a> on",
          " your site. Note that you cannot use the Search API to control the Wix Search Bar or Search Results page.",
          "",
          " The Search API searches supported site documents and returns matching search results in [`Document`](wix-search.WixSearchResult.html#Document) form.",
          " The following documents are currently supported:",
          "",
          " + **Site pages:** All regular site pages with <a href=\"https://support.wix.com/en/article/enabling-search-engines-eg-google-to-find-your-site\" target=\"_blank\">SEO indexing enabled</a>. Note that Wix site pages are indexed by default. Dynamic pages, custom router pages, and some Wix app pages are not currently included in searches.",
          " + **Wix app pages:** Items in the following database collections: Blog/Posts, Bookings/Services, Forum/Posts, and Stores/Products. Each item represents a Wix app page on your site.",
          "",
          " To use the search module, import `wixSearch` from the `wix-search` module:",
          "",
          "   ``` javascript",
          "   import wixSearch from 'wix-search';",
          "   ```" ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "filter",
        "labels": [],
        "nameParams": [],
        "params": [],
        "ret":
          { "type": "wix-search.WixSearchFilterBuilder",
            "doc": "A search filter builder object." },
        "locations":
          [ { "lineno": 72,
              "filename": "filterBuilder.js" } ],
        "docs":
          { "summary": "Creates a filter builder for a search.",
            "description":
              [ "The `filter()` function builds a filter builder for a site and returns",
                " a [`WixSearchFilterBuilder`](wix-search.WixSearchFilterBuilder.html) object.",
                "",
                "The `filter` function lets you filter a search using the `and()`, `or()`, and `not()` functions.",
                "If you want to apply filtering functions (such as `eq` or `gt`) directly to a search, you do not need the `filter` function.",
                "You can chain [`WixSearchBuilder`](wix-search.WixSearchBuilder.html) filtering functions directly to a search builder.",
                "",
                "The following describes a typical filter builder flow:",
                "",
                "",
                " 1. Create a [`WixSearchFilterBuilder`](wix-search.WixSearchFilterBuilder.html) using the `filter` function.",
                " 1. Create a [`WixSearchFilter`](wix-search.WixSearchFilter.html) by chaining a single `WixSearchFilterBuilder` filter function (such as `eq()` or `gt()`) to the filter builder.",
                " 1. Do one of the following:",
                "   + Pass one or more `WixSearchFilters` as parameters to an `and`, `or`, or `not` `WixSearchFilterBuilder` function to create a new `WixSearchFilter`.",
                "   + Pass one or more `WixSearchFilters` as parameters to an `and`, `or`, or `not` `WixSearchBuilder` function to refine a search." ],
            "links": [],
            "examples":
              [ { "title": "Create a filter builder",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "let filterBuilder = wixSearch.filter();" ],
                  "extra":
                    {  } },
                { "title": "Create a filter",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "let filterBuilder = wixSearch.filter();",
                      "let myFilter = filterBuilder.eq(\"inStock\", true);" ],
                  "extra":
                    {  } },
                { "title": "Build and perform a search and get the first document in the search results",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "const filterBuilder = wixSearch.filter();",
                      "",
                      "const gtJanFilter = filterBuilder.gt(\"lastActivityDate\", \"2020-01-01T00:00:00.000Z\");",
                      "const ltJanFilter = filterBuilder.lt(\"lastActivityDate\", \"2020-02-01T00:00:00.000Z\");",
                      "",
                      "const gtAprilFilter = filterBuilder.gt(\"lastActivityDate\", \"2020-04-01T00:00:00.000Z\");",
                      "const ltAprilFilter = filterBuilder.lt(\"lastActivityDate\", \"2020-05-01T00:00:00.000Z\");",
                      "",
                      "const januaryFilter = filterBuilder.and(gtJanFilter, ltJanFilter);",
                      "const aprilFilter = filterBuilder.and(gtAprilFilter, ltAprilFilter);",
                      "",
                      "const dateFilter = filterBuilder.or(januaryFilter, aprilFilter)",
                      "",
                      "const contentFilter = filterBuilder.eq(\"contentType\", \"POSTS\")",
                      "",
                      "wixSearch.search(phrase)",
                      "  .documentType(\"Forum/Posts\")",
                      "  .and(dateFilter, contentFilter)",
                      "  .find()",
                      "  .then( (results) => {",
                      "    if(results.documents.length > 0) {",
                      "      let documents = results.documents;",
                      "    } else {",
                      "      console.log(\"No matching results\");",
                      "    }",
                      "  })",
                      "  .catch( (error) => {",
                      "    console.log(error);",
                      "  });" ],
                  "extra":
                    {  } },
                { "title": "Build and perform a search and display the results in a repeater",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "// Before search runs, set the repeater data as empty",
                      "$w('#repeater').data = [];",
                      "",
                      "$w(\"#searchInput\").onKeyPress((keyPress) => {",
                      "  if (keyPress.key === \"Enter\") {",
                      "    const phrase = $w(\"#searchInput\").value;",
                      "    wixSearch.search(phrase)",
                      "      .documentType(\"Stores/Products\")",
                      "      .find()",
                      "      .then((results) => {",
                      "        if (results.documents.length > 0) {",
                      "          $w('#repeater').data = results.documents;",
                      "        } else {",
                      "          console.log(\"No matching results\");",
                      "        }",
                      "      })",
                      "      .catch((error) => {",
                      "        console.log(error);",
                      "      });",
                      "  }",
                      "});",
                      "",
                      "$w(\"#repeater\").onItemReady(($item, itemData) => {",
                      "  $item(\"#title\").text = itemData.title;",
                      "  $item(\"#description\").text = itemData.description;",
                      "  $item(\"#image\").src = itemData.image;",
                      "  $item(\"#button\").link = itemData.url;",
                      "});" ],
                  "extra":
                    {  } },
                { "title": "Create a search, add an and filter, and run it",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "const filterBuilder = wixSearch.filter();",
                      "",
                      "const gtJanFilter = filterBuilder.gt(\"lastActivityDate\", \"2020-01-01T00:00:00.000Z\");",
                      "const ltJanFilter = filterBuilder.lt(\"lastActivityDate\", \"2020-02-01T00:00:00.000Z\");",
                      "",
                      "const gtAprilFilter = filterBuilder.gt(\"lastActivityDate\", \"2020-04-01T00:00:00.000Z\");",
                      "const ltAprilFilter = filterBuilder.lt(\"lastActivityDate\", \"2020-05-01T00:00:00.000Z\");",
                      "",
                      "const januaryFilter = filterBuilder.and(gtJanFilter, ltJanFilter);",
                      "const aprilFilter = filterBuilder.and(gtAprilFilter, ltAprilFilter);",
                      "",
                      "const dateFilter = filterBuilder.or(januaryFilter, aprilFilter)",
                      "",
                      "const contentFilter = filterBuilder.eq(\"contentType\", \"POSTS\")",
                      "",
                      "wixSearch.search(phrase)",
                      "  .documentType(\"Forum/Posts\")",
                      "  .and(dateFilter, contentFilter)",
                      "  .find()",
                      "  .then( (results) => {",
                      "    if(results.documents.length > 0) {",
                      "      let documents = results.documents;",
                      "    } else {",
                      "      console.log(\"No matching results\");",
                      "    }",
                      "  })",
                      "  .catch( (error) => {",
                      "    console.log(error);",
                      "  });" ],
                  "extra":
                    { "description": "This example demonstrates how to create multiple `WixSearchFilters` and combine them to search for forum posts (excluding comments)\nthat were posted either in the month of January or April of 2020." } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "search",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "phrase",
              "type": "string",
              "doc": "The phrase to run the search on.",
              "optional": true } ],
        "ret":
          { "type": "wix-search.WixSearchBuilder",
            "doc": "A search builder object." },
        "locations":
          [ { "lineno": 29,
              "filename": "search.js" } ],
        "docs":
          { "summary": "Creates a search.",
            "description":
              [ "The `search()` function builds a search for a site and returns",
                " a [`WixSearchBuilder`](wix-search.WixSearchBuilder.html) object.",
                "",
                " The returned object contains the search builder, which is used",
                " to run the search with the [`find()`](wix-search.WixSearchBuilder.html#find)",
                " function.",
                "",
                " Before running `find()`, you can refine the search by chaining [`WixSearchBuilder`](wix-search.WixSearchBuilder.html)",
                " functions on to the search. `WixSearchBuilder` functions enable you to filter, sort, facet,",
                " and control the results a search returns.",
                "",
                " The `search()` runs with the following [`WixSearchBuilder`](wix-search.WixSearchBuilder.html)",
                " defaults that you can override:",
                "",
                " + [**documentType**](wix-search.WixSearchBuilder.html#documentType): Site/Pages",
                " + [**facets**](wix-search.WixSearchBuilder.html#facets): none",
                " + [**fuzzy**](wix-search.WixSearchBuilder.html#limit): `true`",
                " + [**language**](wix-search.WixSearchBuilder.html#language): For multilingual sites, the current language. For single-language sites, the site language.",
                " + [**limit**](wix-search.WixSearchBuilder.html#limit): `25`",
                " + [**skip**](wix-search.WixSearchBuilder.html#skip): `0`",
                "",
                "",
                "`find()` returns results in the form of a [`WixSearchResult`](wix-search.WixSearchResult.html), which",
                " contains [`documents`](wix-search.WixSearchResult~Document) that match the search, information about the",
                " search itself, and functions for paging through the search results.",
                "",
                "`search()` is not case sensitive.",
                "",
                " If a search `phrase` is not specified, `search` returns all documents refined by the search builder.",
                " You can leave out the `phrase` parameter if you want to filter, sort, and/or facet without searching for particular content." ],
            "links": [],
            "examples":
              [ { "title": "Build a search",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "let search = wixSearch.search(phrase);" ],
                  "extra":
                    {  } },
                { "title": "Build and perform a search",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "$w(\"#searchInput\").onKeyPress((keyPress) => {",
                      "  if (keyPress.key === \"Enter\") {",
                      "    const phrase = $w(\"#searchInput\").value;",
                      "    wixSearch.search(phrase)",
                      "      .find()",
                      "      .then((results) => {",
                      "        if (results.documents.length > 0) {",
                      "          let documents = results.documents;",
                      "          let firstDocument = documents[0];",
                      "          let facets = results.facets;",
                      "          let totalCount = results.totalCount;",
                      "          let pageSize = results.pageSize;",
                      "          let currentPage = results.currentPage;",
                      "          let totalPages = results.totalPages;",
                      "          let hasNext = results.hasNext();",
                      "          let hasPrev = results.hasPrev();",
                      "          let length = results.length;",
                      "        } else {",
                      "          console.log(\"No matching results\");",
                      "        }",
                      "      })",
                      "      .catch((error) => {",
                      "        console.log(error);",
                      "      });",
                      "  }",
                      "});" ],
                  "extra":
                    {  } },
                { "title": "Build and perform a search and get the first document in the search results",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "$w(\"#searchInput\").onKeyPress((keyPress) => {",
                      "  if (keyPress.key === \"Enter\") {",
                      "    const phrase = $w(\"#searchInput\").value;",
                      "    wixSearch.search(phrase)",
                      "      .find()",
                      "      .then((results) => {",
                      "        if (results.documents.length > 0) {",
                      "          let firstDocument = results.documents[0];",
                      "        } else {",
                      "          console.log(\"No matching results\");",
                      "        }",
                      "      })",
                      "      .catch((error) => {",
                      "        console.log(error);",
                      "      });",
                      "  }",
                      "});",
                      "",
                      "/**   Example firstDocument:",
                      "  *",
                      "  *  {",
                      "  *     \"_id\":             \"18176e85-ef8b-447c-b66f-f7b7ca360a5d\",",
                      "  *     \"url\":             \"/about\",",
                      "  *     \"documentType\"     \"Site/Pages\",",
                      "  *     \"image\":           \"wix:image://v1/67...4df7.jpg#originWidth=1920&originHeight=2891\",",
                      "  *     \"title\":           \"The Leader in Website Creation\",",
                      "  *     \"description\":     \"Create your own professional web presence—exactly the way you want. Our powerful...\"",
                      "  *   }",
                      "  */" ],
                  "extra":
                    {  } },
                { "title": "Build and perform a search and display the results in a repeater",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "// Before search runs, set the repeater data as empty",
                      "$w('#repeater').data = [];",
                      "",
                      "$w(\"#searchInput\").onKeyPress((keyPress) => {",
                      "  if (keyPress.key === \"Enter\") {",
                      "    const phrase = $w(\"#searchInput\").value;",
                      "    wixSearch.search(phrase)",
                      "      .documentType(\"Stores/Products\")",
                      "      .find()",
                      "      .then((results) => {",
                      "        if (results.documents.length > 0) {",
                      "          $w('#repeater').data = results.documents;",
                      "        } else {",
                      "          console.log(\"No matching results\");",
                      "        }",
                      "      })",
                      "      .catch((error) => {",
                      "        console.log(error);",
                      "      });",
                      "  }",
                      "});",
                      "",
                      "$w(\"#repeater\").onItemReady(($item, itemData) => {",
                      "  $item(\"#title\").text = itemData.title;",
                      "  $item(\"#description\").text = itemData.description;",
                      "  $item(\"#image\").src = itemData.image;",
                      "  $item(\"#button\").link = itemData.url;",
                      "});",
                      "" ],
                  "extra":
                    { "description": "This example demonstrates how to set up a search for store products and display the results in a repeater. Each button in the repeater links to the product page for the selected product." } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages":
    [ { "name": "FilterDefinition",
        "locations":
          [ { "lineno": 1,
              "filename": "filterBuilder.js" } ],
        "docs":
          { "summary": "An object that you pass as the `options` parameter that modifies how an operation is performed.",
            "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "filter",
              "type": "Object",
              "doc": "An object containing a single `key:value` pair, where the `key` is the name of the filter function and the `value` is the value to match against." } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  } }