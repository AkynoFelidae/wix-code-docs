{ "name": "payment-provider-spi",
  "mixes": [],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 1,
      "filename": "payment-provider-spi.js" },
  "docs":
    { "summary": "The Payments Custom Provider SPI.",
      "description":
        [ "> **Note:** This SPI is currently in beta and is subject to change. Some SPIs are currently not available to all users.",
          "",
          "The eCommerce Catalog SPI is a service provider interface provides functionality for implementing your own custom catalog of items and/or services to be sold on your site. This custom catalog can be used instead of, or alongside a Wix Stores catalog.",
          "",
          "Wix eCommerce calls the SPI endpoint [`getCatalogItems()`](https://www.wix.com/velo/reference/spis/ecom-catalog/getcatalogitems) to retrieve the custom catalog's items. These items can then be displayed in dynamic product pages, as well as the cart, checkout, and order.",
          "",
          "Learn more about the [Custom Catalog Extension](https://support.wix.com/en/article/velo-tutorial-ecommerce-custom-catalog-extension-beta)." ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "connectAccount",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "options",
              "type": "payment-provider-spi.ConnectAccountOptions",
              "doc": "Information to use when connecting a new payment provider account." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "payment-provider-spi.ConnectAccountResponse" ] },
            "doc": "Fulfilled - Information about the created account." },
        "locations":
          [ { "lineno": 16,
              "filename": "payment-provider-spi.js" } ],
        "docs":
          { "summary": "Connects a new payment provider account to your site.",
            "description":
              [ "<placeholder>" ],
            "links": [],
            "examples":
              [ { "title": "Connect an account with basic information",
                  "body":
                    [ "export const connectAccount = async (options) => {",
                      "  //Logic for creating a new payment provider account, if needed.  ",
                      "  return {",
                      "    \"credentials\": {",
                      "      \"client_id\": \"1k2k55k3k2llsssl23l45k6\",",
                      "      \"client_secret\": \"19x92ujd0-183ec-asddfasdfasd44ger-234\"",
                      "    },",
                      "    \"accountId\": \"9123467-a3e5-d4556-ff466742-234dd32dfq3456\",",
                      "    \"accountName\": \"jane.brown@example.com\"",
                      "  }",
                      "};" ],
                  "extra":
                    {  } },
                { "title": "Connect an account with numeric and boolean credentials",
                  "body":
                    [ "export const connectAccount = async (options) => {",
                      "    //Logic for creating a new payment provider account, if needed.  ",
                      "    return {",
                      "      \"credentials\": {",
                      "        \"client_id\": \"1k2k55k3k2llsssl23l45k6\",",
                      "        \"client_secret\": \"19x92ujd0-183ec-asddfasdfasd44ger-234\",",
                      "        \"price_includes_tax\": \"true\",",
                      "        \"tax_rate\": \"20\"",
                      "      },",
                      "      \"accountId\": \"9123467-a3e5-d4556-ff466742-234dd32dfq3456\",",
                      "      \"accountName\": \"jane.brown@example.com\"",
                      "    }",
                      "  };" ],
                  "extra":
                    {  } },
                { "title": "Failed connection attempt",
                  "body":
                    [ "export const connectAccount = async (options) => {",
                      "    //Logic for creating a new payment provider account, if needed.  ",
                      "    return {",
                      "      \"reasonCode\": 2009,",
                      "      \"errorCode\": \"CURRENCY_IS_NOT_SUPPORTED\",",
                      "      \"errorMessage\": \"Currency USD is not supported\"",
                      "    } ",
                      "  };" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "createTransaction",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "options",
              "type": "payment-provider-spi.CreateTransactionOptions",
              "doc": "Information to use when creating a new transaction." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "payment-provider-spi.CreateTransactionResponse" ] },
            "doc": "Fulfilled - <placeholder>" },
        "locations":
          [ { "lineno": 56,
              "filename": "payment-provider-spi.js" } ],
        "docs":
          { "summary": "Creates a new transaction.",
            "links": [],
            "examples":
              [ { "title": "Payment approved instantly",
                  "body":
                    [ "export const createTransaction = async (options) => {",
                      "  //Logic for creating a new transaction with the payment provider.",
                      "  return {",
                      "    \"pluginTransactionId\": \"1832456-3561234\",",
                      "  }",
                      "};" ],
                  "extra":
                    {  } },
                { "title": "Payment declined instantly",
                  "body":
                    [ "export const createTransaction = async (options) => {",
                      "  //Logic for creating a new transaction with the payment provider.",
                      "  return {",
                      "    \"pluginTransactionId\": \"1832456-3561234\",",
                      "    \"reasonCode\": 3012,",
                      "    \"errorCode\": \"INSUFFICIENT_FUNDS\",",
                      "    \"errorMessage\": \"Insufficient funds\"",
                      "  }",
                      "};" ],
                  "extra":
                    {  } },
                { "title": "Payment pending",
                  "body":
                    [ "export const createTransaction = async (options) => {",
                      "  //Logic for creating a new transaction with the payment provider.",
                      "  return {",
                      "    \"pluginTransactionId\": \"1832456-3561234\",",
                      "    \"reasonCode\": 5005",
                      "  }",
                      "};" ],
                  "extra":
                    {  } },
                { "title": "Payment with 3DS verification",
                  "body":
                    [ "export const createTransaction = async (options) => {",
                      "  //Logic for creating a new transaction with the payment provider.",
                      "  return {",
                      "    \"pluginTransactionId\": \"1832456-3561234\",",
                      "    \"redirectUrl\": \"https://www.example.com/redirect-from-sale\"",
                      "  }",
                      "};" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "refundTransaction",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "options",
              "type": "payment-provider-spi.RefundOptions",
              "doc": "Information to use when creating a refund request." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "payment-provider-spi.RefundResponse" ] },
            "doc": "Fulfilled - <placeholder>" },
        "locations":
          [ { "lineno": 173,
              "filename": "payment-provider-spi.js" } ],
        "docs":
          { "summary": "Creates a refund for a transaction.",
            "links": [],
            "examples":
              [ { "title": "Successful refund",
                  "body":
                    [ "export const refundTransaction = async (options, context) => { ",
                      "  //Logic for refunding a transaction with the payment provider.",
                      "  return {",
                      "    \"pluginRefundId\" : \"16423-234234\"",
                      "  }",
                      "};" ],
                  "extra":
                    {  } },
                { "title": "Failed refund",
                  "body":
                    [ "export const refundTransaction = async (options, context) => { ",
                      "  //Logic for refunding a transaction with the payment provider.",
                      "  return {",
                      "    \"pluginRefundId\" : \"16423-234234\",",
                      "    \"reasonCode\" : 3025,",
                      "    \"errorCode\" : \"INSUFFICIENT_FUNDS_FOR_REFUND\",",
                      "    \"errorMessage\" : \"Insufficient funds for refund\"",
                      "  }",
                      "};" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages":
    [ { "name": "Address",
        "locations":
          [ { "lineno": 112,
              "filename": "payment-provider-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "lastName",
              "type": "string",
              "doc": "Last name." },
            { "name": "firstName",
              "type": "string",
              "doc": "First name." },
            { "name": "company",
              "type": "string",
              "doc": "Company name." },
            { "name": "address",
              "type": "string",
              "doc": "Street and house number." },
            { "name": "street",
              "type": "string",
              "doc": "Street name." },
            { "name": "houseNumber",
              "type": "string",
              "doc": "House number." },
            { "name": "city",
              "type": "string",
              "doc": "City." },
            { "name": "state",
              "type": "string",
              "doc": "State." },
            { "name": "zipCode",
              "type": "string",
              "doc": "Zip code." },
            { "name": "countryCode",
              "type": "string",
              "doc": "Country code in [ISO 3166-1 alpha-2](http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2) format." },
            { "name": "phone",
              "type": "string",
              "doc": "Phone number." },
            { "name": "email",
              "type": "string",
              "doc": "Email address." },
            { "name": "fax",
              "type": "string",
              "doc": "Fax number." },
            { "name": "taxIdentifier",
              "type": "payment-provider-spi.TaxIdentifier",
              "doc": "Tax identification information." } ],
        "extra":
          {  },
        "labels":
          [ "changed" ] },
      { "name": "BuyerInfo",
        "locations":
          [ { "lineno": 148,
              "filename": "payment-provider-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "buyerId",
              "type": "string",
              "doc": "A free format unique buyer identifier assigned by Wix." },
            { "name": "buyerLanguage",
              "type": "string",
              "doc": "Buyer language in [ISO 639-1](http://en.wikipedia.org/wiki/ISO_639-1) format." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "Charges",
        "locations":
          [ { "lineno": 140,
              "filename": "payment-provider-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "shipping",
              "type": "number",
              "doc": "Shipping cost." },
            { "name": "tax",
              "type": "number",
              "doc": "Calculated tax amount." },
            { "name": "discount",
              "type": "number",
              "doc": "Discount applied to the order." } ],
        "extra":
          {  },
        "labels":
          [ "changed" ] },
      { "name": "ConnectAccountOptions",
        "locations":
          [ { "lineno": 31,
              "filename": "payment-provider-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "credentials",
              "type": "object",
              "doc": "A set of key:value pairs representing the credentials required to either create \na new payment provider account." },
            { "name": "country",
              "type": "string",
              "doc": "The country for your site's business, as defined on the [Accept Payments](https://www.wix.com/my-account/site-selector/?buttonText=Set%20Up%20Payments&title=Select%20a%20Site&autoSelectOnSingleSite=true&actionUrl=https://www.wix.com/dashboard/%7b%7bmetaSiteId%7d%7d/payments/) page in the dashboard. [ISO 3166-1 alpha-2](http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2) format." },
            { "name": "currency",
              "type": "string",
              "doc": "The currency accepted by your site. [ISO 4217](http://en.wikipedia.org/wiki/ISO_4217) format." },
            { "name": "wixMerchantId",
              "type": "string",
              "doc": "Your site's Wix merchant ID." } ],
        "extra":
          {  },
        "labels":
          [ "changed" ] },
      { "name": "ConnectAccountResponse",
        "locations":
          [ { "lineno": 42,
              "filename": "payment-provider-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "credentials",
              "type": "object",
              "doc": "The account credentials for making API requests to the payment provider. These \ncredentials are passed to the [`createTransaction()`](#createTransaction) and [`refundTransaction()`](#refundTransaction) functions \nto use when sending requests to the provider's API." },
            { "name": "accountName",
              "type": "string",
              "doc": "The payment provider account name.",
              "optional": true },
            { "name": "reasonCode",
              "type": "number",
              "doc": "A code indicating the outcome of the transaction request.",
              "optional": true },
            { "name": "errorCode",
              "type": "string",
              "doc": "An error code supplied by the payment provider if account creation fails.",
              "optional": true },
            { "name": "errorMessage",
              "type": "string",
              "doc": "An error message supplied by the payment provider if account creation fails.",
              "optional": true } ],
        "extra":
          {  },
        "labels":
          [ "changed" ] },
      { "name": "CreateTransactionOptions",
        "locations":
          [ { "lineno": 70,
              "filename": "payment-provider-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "wixTransactionId",
              "type": "string",
              "doc": "Wix's ID for the transaction." },
            { "name": "paymentMethod",
              "type": "string",
              "doc": "The payment method chosen by the site visitor." },
            { "name": "merchantCredentials",
              "type": "object",
              "doc": "Credentials for sending requests to the payment provider's API in key:value format." },
            { "name": "order",
              "type": "payment-provider-spi.OrderData",
              "doc": "Order information." },
            { "name": "wixMerchantId",
              "type": "string",
              "doc": "Your site's Wix merchant ID." },
            { "name": "fraudInformation",
              "type": "payment-provider-spi.FraudInfo",
              "doc": "Information you can use to prevent payment fraud." } ],
        "extra":
          {  },
        "labels":
          [ "changed" ] },
      { "name": "CreateTransactionResponse",
        "locations":
          [ { "lineno": 160,
              "filename": "payment-provider-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "pluginTransactionId",
              "type": "string",
              "doc": "The payment provider's ID for the transaction." },
            { "name": "reasonCode",
              "type": "number",
              "doc": "A code indicating the outcome of the transaction request." },
            { "name": "errorCode",
              "type": "string",
              "doc": "An error code supplied by the payment provider if the transaction request fails." },
            { "name": "errorMessage",
              "type": "string",
              "doc": "An error message supplied by the payment provider if the transaction request fails." },
            { "name": "redirectUrl",
              "type": "string",
              "doc": "A URL on the payment provider's site to forward the site visitor to for payment processing." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "FraudInfo",
        "locations":
          [ { "lineno": 87,
              "filename": "payment-provider-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "remoteIp",
              "type": "string",
              "doc": "The IP address of the site visitor who initiated the transaction." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "OrderData",
        "locations":
          [ { "lineno": 80,
              "filename": "payment-provider-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "_id",
              "type": "string",
              "doc": "The order ID." },
            { "name": "description",
              "type": "payment-provider-spi.OrderDetails",
              "doc": "Details about the order." },
            { "name": "returnUrls",
              "type": "payment-provider-spi.ReturnUrls",
              "doc": "URLs to forward the site visitor to for different transaction outcomes." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "OrderDetails",
        "locations":
          [ { "lineno": 92,
              "filename": "payment-provider-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "billingAddress",
              "type": "payment-provider-spi.Address",
              "doc": "Billing address." },
            { "name": "items",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "payment-provider-spi.OrderItem" ] },
              "doc": "Items ordered." },
            { "name": "totalAmount",
              "type": "string",
              "doc": "The total amount of the order including any extra charges expressed in the currency's smallest unit. For example, a $10.00 USD amount is expressed as `1000`." },
            { "name": "charges",
              "type": "payment-provider-spi.Charges",
              "doc": "Extra charges for the order." },
            { "name": "buyerInfo",
              "type": "payment-provider-spi.BuyerInfo",
              "doc": "Information about the site visitor who initiated the transaction." },
            { "name": "currency",
              "type": "string",
              "doc": "Order currency." },
            { "name": "shippingAddress",
              "type": "payment-provider-spi.Address",
              "doc": "Shipping address." } ],
        "extra":
          {  },
        "labels":
          [ "changed" ] },
      { "name": "OrderItem",
        "locations":
          [ { "lineno": 131,
              "filename": "payment-provider-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "_id",
              "type": "string",
              "doc": "Item ID." },
            { "name": "name",
              "type": "string",
              "doc": "Item name." },
            { "name": "quantity",
              "type": "number",
              "doc": "The number of items ordered." },
            { "name": "price",
              "type": "string",
              "doc": "Item price per unit." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "RefundOptions",
        "locations":
          [ { "lineno": 186,
              "filename": "payment-provider-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "wixTransactionId",
              "type": "string",
              "doc": "Wix's ID for the transaction." },
            { "name": "wixRefundId",
              "type": "string",
              "doc": "Wix's ID for the refund." },
            { "name": "pluginTransactionId",
              "type": "string",
              "doc": "The payment provider's ID for the transaction." },
            { "name": "merchantCredentials",
              "type": "object",
              "doc": "Credentials for sending requests to the payment provider's API in key:value format." },
            { "name": "refundAmount",
              "type": "number",
              "doc": "The total amount to refunde expressed in the currency's smallest unit. For example, a $10.00 USD amount is expressed as `1000`." },
            { "name": "refundReason",
              "type": "string",
              "doc": "An enum value that indicates the reason for the refund. One of: `DUPLICATE`, `FRAUDULENT`, `REQUESTED_BY_CUSTOMER`, or `OTHER`." } ],
        "extra":
          {  },
        "labels":
          [ "changed" ] },
      { "name": "RefundResponse",
        "locations":
          [ { "lineno": 196,
              "filename": "payment-provider-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "pluginRefundId",
              "type": "string",
              "doc": "The payment provider's ID for the refund." },
            { "name": "reasonCode",
              "type": "number",
              "doc": "A code indicating the outcome of the refund request." },
            { "name": "errorCode",
              "type": "string",
              "doc": "An error code supplied by the payment provider if the refund request fails." },
            { "name": "errorMessage",
              "type": "string",
              "doc": "An error message supplied by the payment provider if the refund request fails." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "ReturnUrls",
        "locations":
          [ { "lineno": 103,
              "filename": "payment-provider-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "successUrl",
              "type": "string",
              "doc": "A URL to forward the site visitor to if the transaction succeeds." },
            { "name": "errorUrl",
              "type": "string",
              "doc": "A URL to forward the site visitor to if the transaction fails." },
            { "name": "cancelUrl",
              "type": "string",
              "doc": "A URL to forward the site visitor to if the transaction is canceled." },
            { "name": "pendingUrl",
              "type": "string",
              "doc": "A URL to forward the site visitor to if the transaction is pending." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "TaxIdentifier",
        "locations":
          [ { "lineno": 154,
              "filename": "payment-provider-spi.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "id",
              "type": "string",
              "doc": "Tax ID." },
            { "name": "type",
              "type": "string",
              "doc": "Tax type." } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  } }