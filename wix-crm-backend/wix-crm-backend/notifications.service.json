{ "name": "notifications",
  "memberOf": "wix-crm-backend",
  "mixes": [],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 1,
      "filename": "notifications.js" },
  "docs":
    { "summary": "The Notifications API is used to send notifications to the site owner and contributors.",
      "description":
        [ "Notifications are messages that are sent to the site dashboard, Wix app,",
          " and/or browser of your site's <a href=\"https://support.wix.com/en/article/contributor-roles\" target=\"_blank\">contributors</a>.",
          "",
          " To learn more about notifications, see <a href=\"https://support.wix.com/en/article/about-site-notifications\" target=\"_blank\">About Site Notifications</a>.",
          "",
          " To use the Notifications API, import `notifications` from the `wix-crm-backend` module:",
          "",
          "   ```javascript",
          "   import {notifications} from 'wix-crm-backend';",
          "   ```" ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "notify",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "body",
              "type": "string",
              "doc": "Contents of the notification. Max length: 512 characters." },
            { "name": "channels",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "string" ] },
              "doc": "The channels to send the notification on. \nOne or more of: \n\n+ `\"Mobile\"`: Sends the notification to the Wix App.\n+ `\"Dashboard\"`: Sends the notification to the contributor's Wix dashboard.\n+ `\"Browser\"`: Sends the notification to the contributor's browser." },
            { "name": "options",
              "type": "wix-crm-backend.notifications.NotificationOptions",
              "doc": "Additional notification related information." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When the send notification request is received." },
        "locations":
          [ { "lineno": 60,
              "filename": "notifications.js" } ],
        "docs":
          { "summary": "Sends a notification.",
            "description":
              [ "The `notify()` function sends a <a href=\"https://support.wix.com/en/article/about-site-notifications\" target=\"_blank\">notification</a> to",
                " the specified site contributors on the specified channels.",
                "",
                " Use the `channels` parameter to specify which channels to send the notification to.",
                "",
                " Use the `recipients` property of the `options` parameter to specify which site",
                " contributors to send the notification to." ],
            "links": [],
            "examples":
              [ { "title": "Send a notification to the site owner's Dashboard",
                  "body":
                    [ "import {notifications} from 'wix-crm-backend';",
                      "",
                      "export function notifyOwnerOnDashboard() {",
                      "  notifications.notify(",
                      "    \"Notification body\", ",
                      "    [\"Dashboard\"], ",
                      "    {",
                      "      \"title\": \"Notification Title\",",
                      "      \"actionTitle\": \"Click this!\",",
                      "      \"actionTarget\": {\"url\": \"http://mysite.com/somepage\"},",
                      "      \"recipients\": {\"role\": \"Owner\"}",
                      "    }",
                      "  );",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Send a notification to the site owner on multiple channels (browser and mobile)",
                  "body":
                    [ "import {notifications} from 'wix-crm-backend';",
                      "",
                      "export function notifyMultipleChannels() {",
                      "  notifications.notify(",
                      "    \"Notification body\", ",
                      "    [\"Browser\", \"Mobile\"], ",
                      "    {",
                      "      \"title\": \"Notification Title\",",
                      "      \"actionTitle\": \"Click this!\",",
                      "      \"actionTarget\": {\"url\": \"http://mysite.com/somepage\"},",
                      "      \"recipients\": {\"role\": \"Owner\"}",
                      "    }",
                      "  );",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Send a notification to all site contributors on mobile",
                  "body":
                    [ "import {notifications} from 'wix-crm-backend';",
                      "",
                      "export function notifySiteContributors() {",
                      "  notifications.notify(",
                      "    \"Notification body\", ",
                      "    [\"Mobile\"], ",
                      "    {",
                      "      \"title\": \"Notification Title\",",
                      "      \"actionTitle\": \"Click this!\",",
                      "      \"actionTarget\": {\"url\": \"http://mysite.com/somepage\"},",
                      "      \"recipients\": { \"role\": \"All_Contributors\"}",
                      "    }",
                      "  );",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "subscribeToTopics",
        "labels":
          [ "removed" ],
        "nameParams": [],
        "params":
          [ { "name": "contactId",
              "type": "string",
              "doc": "The contact id you want to subscribe." },
            { "name": "topics",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "string" ] },
              "doc": "The Topics (a list of strings) that you want to subscribe to." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When the contact was subscribed." },
        "locations":
          [ { "lineno": 89,
              "filename": "notifications.js" } ],
        "docs":
          { "summary": "This endpoint allows you to subscribe contacts to some Topic (string), and then use the list of subscribed contacts in the `notify` call",
            "description":
              [ "The `subscribeToTopics()` function subscribes the specified contacts to the specified topic.",
                " You can later use the topic in order to send a notification to all of the contacts that were subscribed to the topic.",
                " The operation is idempotent, you can subscribe a single contact multiple times, and he will end up being subscribed only once.",
                "",
                " Use the `contactId` parameter to specify which contact you want to subscribe.",
                "",
                " Use the `topics` property to specify to which topics you want to subscribe him to (can be one or more)." ],
            "links": [],
            "examples":
              [ { "title": "Subscribe contact to a list of topics",
                  "body":
                    [ "import {notifications} from 'wix-crm-backend';",
                      "",
                      "export function subscribeToTopics() {",
                      "    notifications.subscribeToTopics(",
                      "        \"3574169c-b671-40d0-a7c8-738f9d6524bb\", [\"some-topic1\", \"some-topic2\"]",
                      "    );",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "unsubscribeFromTopics",
        "labels":
          [ "removed" ],
        "nameParams": [],
        "params":
          [ { "name": "contactId",
              "type": "string",
              "doc": "The contact id you want to unsubscribe." },
            { "name": "topics",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "string" ] },
              "doc": "The Topics (a list of strings) that you want to unsubscribe from." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When the contact was unsubscribed." },
        "locations":
          [ { "lineno": 108,
              "filename": "notifications.js" } ],
        "docs":
          { "summary": "This endpoint allows you to unsubscribe contacts from some Topic",
            "description":
              [ "The `unsubscribeFromTopics()` function removes the subscription of the specified contacts from the specified topic.",
                "",
                " Use the `contactId` parameter to specify which contact you want to unsubscribe.",
                "",
                " Use the `topics` property to specify from which topics you want to unsubscribe him from (can be one or more)." ],
            "links": [],
            "examples":
              [ { "title": "Unsubscribe contact from a list of topics",
                  "body":
                    [ "import {notifications} from 'wix-crm-backend';",
                      "",
                      "export function unsubscribeFromTopics() {",
                      "    notifications.unsubscribeFromTopics(",
                      "        \"3574169c-b671-40d0-a7c8-738f9d6524bb\", [\"some-topic1\", \"some-topic2\"]",
                      "    );",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages":
    [ { "name": "ActionTarget",
        "locations":
          [ { "lineno": 32,
              "filename": "notifications.js" } ],
        "docs":
          { "summary": "An object containing information about where to navigate when a notification is clicked.",
            "links":
              [ "[NotificationOptions](#NotificationOptions)" ],
            "examples":
              [ { "title": "Send a notification to all site contributors on mobile",
                  "body":
                    [ "import {notifications} from 'wix-crm-backend';",
                      "",
                      "export function notifySiteContributors() {",
                      "  notifications.notify(",
                      "    \"Notification body\", ",
                      "    [\"Mobile\"], ",
                      "    {",
                      "      \"title\": \"Notification Title\",",
                      "      \"actionTitle\": \"Click this!\",",
                      "      \"actionTarget\": {\"url\": \"http://mysite.com/somepage\"},",
                      "      \"recipients\": { \"role\": \"All_Contributors\"}",
                      "    }",
                      "  );",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "url",
              "type": "string",
              "doc": "URL to navigate to when the `actionTitle` text is clicked.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "Contacts",
        "locations":
          [ { "lineno": 53,
              "filename": "notifications.js" } ],
        "docs":
          { "summary": "An object containing information about which contacts will receive a notification.",
            "links":
              [ "[NotificationOptions](#NotificationOptions)" ],
            "examples":
              [ { "title": "Send a notification to specific contact ids on mobile",
                  "body":
                    [ "import {notifications} from 'wix-crm-backend';",
                      "",
                      "export function notifyContacts() {",
                      "    notifications.notify(",
                      "        \"Notification body\",",
                      "        [\"Mobile\"],",
                      "        {",
                      "            \"title\": \"Notification Title\",",
                      "            \"actionTitle\": \"Click this!\",",
                      "            \"actionTarget\": {\"url\": \"http://mysite.com/somepage\"},",
                      "            \"recipients\": {\"ids\": [\"2fc7141a-5fb6-4a20-8bfe-86e348ef09ed\"]}",
                      "        }",
                      "    );",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "ids",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "string" ] },
              "doc": "Contact Ids to receive the notification.",
              "optional": true } ],
        "extra":
          {  },
        "labels":
          [ "removed" ] },
      { "name": "NotificationOptions",
        "locations":
          [ { "lineno": 17,
              "filename": "notifications.js" } ],
        "docs":
          { "summary": "An object representing notification options.",
            "links":
              [ "[notify( )](#notify)" ],
            "examples":
              [ { "title": "Send a notification to all site contributors on mobile",
                  "body":
                    [ "import {notifications} from 'wix-crm-backend';",
                      "",
                      "export function notifySiteContributors() {",
                      "  notifications.notify(",
                      "    \"Notification body\", ",
                      "    [\"Mobile\"], ",
                      "    {",
                      "      \"title\": \"Notification Title\",",
                      "      \"actionTitle\": \"Click this!\",",
                      "      \"actionTarget\": {\"url\": \"http://mysite.com/somepage\"},",
                      "      \"recipients\": { \"role\": \"All_Contributors\"}",
                      "    }",
                      "  );",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "title",
              "type": "string",
              "doc": "Notification title. Only displayed on mobile and browser notifications. Max length: 512 characters.",
              "optional": true },
            { "name": "actionTitle",
              "type": "string",
              "doc": "Call to action text to be clicked on. When clicked, navigates to the `actionTarget` URL. Max length: 512 characters.",
              "optional": true },
            { "name": "actionTarget",
              "type": "wix-crm-backend.notifications.ActionTarget",
              "doc": "Where to navigate to when the `actionTitle` text is clicked.",
              "optional": true },
            { "name": "recipients",
              "type": "wix-crm-backend.notifications.SiteContributors",
              "doc": "Contributor that will receive the notifications, based on their assigned roles.\n One of:\n\n + `\"All_Contributors\"`: All site contributors, including the site owner.\n + `\"Owner\"`: Only the site owner.",
              "optional": true } ],
        "extra":
          {  },
        "labels":
          [ "changed" ] },
      { "name": "SiteContributors",
        "locations":
          [ { "lineno": 40,
              "filename": "notifications.js" } ],
        "docs":
          { "summary": "An object containing information about which contributors will receive a notification.",
            "links":
              [ "[NotificationOptions](#NotificationOptions)" ],
            "examples":
              [ { "title": "Send a notification to all site contributors on mobile",
                  "body":
                    [ "import {notifications} from 'wix-crm-backend';",
                      "",
                      "export function notifySiteContributors() {",
                      "  notifications.notify(",
                      "    \"Notification body\", ",
                      "    [\"Mobile\"], ",
                      "    {",
                      "      \"title\": \"Notification Title\",",
                      "      \"actionTitle\": \"Click this!\",",
                      "      \"actionTarget\": {\"url\": \"http://mysite.com/somepage\"},",
                      "      \"recipients\": { \"role\": \"All_Contributors\"}",
                      "    }",
                      "  );",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "role",
              "type": "string",
              "doc": "Roles to receive the notification.\nOne of:\n\n+ `\"All_Contributors\"`: All site contributors (default).\n+ `\"Owner\"`: Only the site owner.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  } }